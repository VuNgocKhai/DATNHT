<!doctype html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Sidebar 03</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        #listGCTTable {
            table-layout: fixed;
        }

        #listGCTTable thead th {
            position: sticky;
            top: 0;
            background-color: white;
        }

        #listGCTTable tbody {
            max-height: 300px;
            overflow-y: auto;
        }

        #ListKhachHangTable {
            table-layout: fixed;
        }

        #ListKhachHangTable thead th {
            position: sticky;
            top: 0;
            background-color: white;
        }

        #ListKhachHangTable tbody {
            max-height: 300px;
            overflow-y: auto;
        }

        /* Hiệu ứng border nổi cho các thẻ địa chỉ */
        .address-card {
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 10px;
            background-color: #fff;
            margin-bottom: 10px;
        }

        /* Tạo khoảng cách giữa tiêu đề và nút radio */
        .address-card h6 {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
<div class="wrapper d-flex align-items-stretch">
    <nav id="sidebar">
        <div class="custom-menu">
            <button type="button" id="sidebarCollapse" class="btn btn-primary">
                <i class="fa fa-bars"></i>
                <span class="sr-only">Toggle Menu</span>
            </button>
        </div>
        <div class="p-4">
            <h1><a href="danh_muc.html" class="logo">DLFV</a></h1>
            <ul class="list-unstyled components mb-5">
                <li class="active">
                    <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><span
                            class="fa fa-home mr-3"></span>Thống Kê</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu">
                        <li>
                            <a href="#">Home 1</a>
                        </li>
                        <li>
                            <a href="#">Home 2</a>
                        </li>
                        <li>
                            <a href="#">Home 3</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#homeSubmenu1" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><span
                            class="fa fa-user mr-3"></span> Quản Lý Đơn Hàng</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu1">
                        <li>
                            <a href="#">Home 1</a>
                        </li>
                        <li>
                            <a href="#">Home 2</a>
                        </li>
                        <li>
                            <a href="#">Home 3</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#"><span class="fa fa-briefcase mr-3"></span> Bán Hàng Tại Quầy</a>
                </li>
                <li>
                    <a href="#homeSubmenu2" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><span
                            class="fa fa-sticky-note mr-3"></span> Quản Lý Sản Phẩm</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu2">
                        <li>
                            <a href="#">Sản Phẩm</a>
                        </li>
                        <li>
                            <a href="#">Thương Hiệu</a>
                        </li>
                        <li>
                            <a href="/admin/danhmuc">Danh Mục</a>
                        </li>
                        <li>
                            <a href="#">Chất Liệu</a>
                        </li>
                        <li>
                            <a href="#">Đế Giày</a>
                        </li>
                        <li>
                            <a href="#">Màu Sắc</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#homeSubmenu3" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><span
                            class="fa fa-paper-plane mr-3"></span> Quản Lý Tài Khoản</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu3">
                        <li>
                            <a href="#">Nhân Viên</a>
                        </li>
                        <li>
                            <a href="#">Khách Hàng</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#homeSubmenu4" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle"><span
                            class="fa fa-cubes mr-3"></span>Khuyến Mại</a>
                    <ul class="collapse list-unstyled" id="homeSubmenu4">
                        <li>
                            <a href="#">Sản Phẩm</a>
                        </li>
                        <li>
                            <a href="/admin/giamgiahoadon">Hóa Đơn</a>
                        </li>
                    </ul>
                </li>
            </ul>

            <div class="mb-5">
                <h3 class="h6 mb-3">Subscribe for newsletter</h3>
                <form action="#" class="subscribe-form">
                    <div class="form-group d-flex">
                        <div class="icon"><span class="icon-paper-plane"></span></div>
                        <input type="text" class="form-control" placeholder="Enter Email Address">
                    </div>
                </form>
            </div>

            <div class="footer">
                <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                    All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a
                            href="https://colorlib.com" target="_blank">Colorlib.com</a>
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
            </div>

        </div>
    </nav>
    <!-- Page Content  -->
    <div id="content" class="p-4 p-md-5 pt-5 bg-secondary">
        <nav class="navbar navbar-expand-lg navbar-light bg-light" style="margin-top: -50px;">
            <div class="container-fluid" style="display: flex;justify-content: end;">
                <ul class="navbar-nav">
                    <!-- Avatar -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#"
                           id="navbarDropdownMenuLink"
                           role="button" data-toggle="dropdown" aria-expanded="false">
                            <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img (31).webp" class="rounded-circle"
                                 height="72" alt="Avatar" loading="lazy"/>
                        </a>
                        <div class="dropdown-menu" style="margin-left: -88px;">
                            <a class="dropdown-item" href="#">Đăng Xuất</a>
                            <a class="dropdown-item" href="#">Thông Tin Cá Nhân</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="container bg-light" style="border: 2px solid #ccc; padding: 20px; border-radius: 10px;">
            <div class="row">
                <div class="col-5">
                    <h4 class="page-title" style="color: #721c24">Các Sản Phẩm Đã Chọn</h4>
                </div>
                <div class="col-3"></div>
                <div class="col-4">
                    <button class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                            data-bs-target="#exampleModal">
                        <span class="btn-label"><i class="bi bi-plus-square"></i></span> Chọn Sản Phẩm
                    </button>
                </div>
            </div>
            <!--            Model chọn sản phẩm-->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <form th:action="@{/admin/ban-hang-tai-quay/tao-don-hang/add-to-cart}" method="post">
                        <div class="modal-content" style="background-color: #d4d4d4">

                            <div class="modal-header row">
                                <h5 class="modal-title col-8" id="exampleModalLabel">Chọn các sản phẩm muốn mua</h5>
                                <div class="col-4">
                                    <input type="hidden" class="form-control" th:name="maHD" th:value="${maHD}">
                                    <button type="submit" class="btn btn-success"
                                            style="float: right;text-decoration: none;">
                                        Chọn Sản Phẩm (<span id="selectedCount">0</span>)
                                    </button>
                                </div>
                            </div>
                            <div class="modal-body">
                                <div th:if="${ListGiayChiTiet.isEmpty()}">
                                    <h4 style="text-align: center">Danh Sách Giày Trống !</h4>
                                </div>
                                <div th:each="gct:${ListGiayChiTiet}" class="address-card">
                                    <div class="row">
                                        <div class="col-2"
                                             style="display: flex; justify-content: center; align-items: center;">
                                            <input type="checkbox" style="width: 35px; height: 35px;"
                                                   th:value="${gct.id}" th:name="selectedIds">
                                        </div>

                                        <div class="col-7 row">
                                            <div class="col-5">
                                                <img style="width: 100px"
                                                     th:src="@{|/images/${gct.giay.getAnhDau(gct.giay.anhs)}|}" alt="">
                                            </div>
                                            <div class="col-7">
                                                <span style="margin: auto">
                                                    <span style="color: #721c24">Tên Giày: </span> [[${gct.giay.ten}]]<br>
                                                    <span style="color: #86862f">Giá Bán: </span> [[${gct.giay.giaban}]] $<br>
                                                    <span style="color: darkgreen">Kích Cỡ: </span> [[${gct.kich_co.ten}]]<br>
                                                </span>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                             <span>
                                                 Số Lượng:
                                                 <input type="number" class="form-control col-4 bg-secondary"
                                                        th:name="'quantity[' + ${gct.id} + ']'" value="1">
                                             </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!--            End modal chọn sản phẩm-->
        </div>
        <div style="margin-top: 20px"></div>
        <!--        Danh sách sản phẩm đã chọn -->
        <div class="container bg-light" style="border: 2px solid #ccc; padding: 20px; border-radius: 10px;">
            <table class="table table-hover">
                <thead class="thead-light">
                <tr>
                    <th scope="col" style="text-align: center">Ảnh</th>
                    <th scope="col" style="text-align: center">Sản Phẩm</th>
                    <th scope="col" style="text-align: center">Size</th>
                    <th scope="col" style="text-align: center">Số Lượng</th>
                    <th scope="col" style="text-align: center">Giá</th>
                    <th scope="col" style="text-align: center">Thao Tác</th>
                </tr>
                </thead>
                <tbody>
                <tr th:if="${hoaDonChiTietPage.content.isEmpty()}">
                    Danh sách trống
                </tr>
                <tr th:each="hdct:${hoaDonChiTietPage.content}">
                    <td>
                        <span th:if="${hdct.giayChiTiet == null}"></span>
                        <span class="d-flex justify-content-center align-items-center"
                              th:if="${hdct.giayChiTiet != null}">
                            <img style="width: 100px"
                                 th:src="@{|/images/${hdct.giayChiTiet.giay.getAnhDau(hdct.giayChiTiet.giay.anhs)}|}"
                                 alt="">
                        </span>
                    </td>
                    <td>
                        <span th:if="${hdct.giayChiTiet == null}"></span>
                        <span style="display: flex; justify-content: center; align-items: center;"
                              th:if="${hdct.giayChiTiet != null}">
                            [[${hdct.giayChiTiet.giay.ten}]]
                        </span>
                    </td>
                    <td>
                        <span th:if="${hdct.giayChiTiet == null}"></span>
                        <span style="display: flex; justify-content: center; align-items: center;"
                              th:if="${hdct.giayChiTiet != null}">
                            [[${hdct.giayChiTiet.kich_co.ten}]]
                        </span>
                    </td>
                    <td>
                        <span th:if="${hdct.so_luong == null}"></span>
                        <span style="display: flex; justify-content: center; align-items: center;"
                              th:if="${hdct.so_luong != null}">
                            [[${hdct.so_luong}]]
                        </span>
                    </td>
                    <td>
                        <span th:if="${hdct.don_gia == null}"></span>
                        <span style="display: flex; justify-content: center; align-items: center;"
                              th:if="${hdct.don_gia != null}">
                            [[${hdct.don_gia}]]
                        </span>
                    </td>
                    <td style="display: flex; justify-content: center; align-items: center;"
                        th:if="${hdct.giayChiTiet != null}">
                        <a onclick="return confirm('Bạn có chắc chắn muốn xóa?')"
                           th:href="@{|/admin/ban-hang-tai-quay/tao-don-hang/delete/${hdct.hoaDon.ma}/${hdct.giayChiTiet.id}/${hdct.so_luong}|}">
                            <i style="font-size: 2rem; color: cornflowerblue;" class="bi bi-x-square"></i>
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>
            <!--            nav-->
            <nav aria-label="Page navigation example"
                 style="display: flex;justify-content: space-between;">
                <div style="margin-left: 20px">
                    <p>Bạn đang xem [[${hoaDonChiTietPage.numberOfElements}]] trên tổng số
                        [[${hoaDonChiTietPage.totalElements}]]</p>
                </div>
                <ul class="pagination" style="margin-right: 24px;">
                    <li class="page-item">
                        <a class="page-link" th:if="${hoaDonChiTietPage.number > 0}"
                           th:href="@{|/admin/ban-hang-tai-quay/view-cart/${maHD}?page1=${hoaDonChiTietPage.number-1}|}"
                           aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>

                    <li th:each="tongtrang,status:${#numbers.sequence(1, hoaDonChiTietPage.totalPages)}"
                        class="page-item"><a class="page-link"
                                             th:href="@{|/admin/ban-hang-tai-quay/view-cart/${maHD}?page1=${status.index}|}">[[${status.index+1}]]</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link"
                           th:if="${hoaDonChiTietPage.number < hoaDonChiTietPage.totalPages - 1}"
                           th:href="@{|/admin/ban-hang-tai-quay/view-cart/${maHD}?page1=${hoaDonChiTietPage.number+1}|}"
                           aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <!--            nav-->
        </div>
        <!--     End Danh sách sản phẩm đã chọn-->
        <div style="margin-top: 20px"></div>
        <!--        Chọn khách hàng-->
        <div class="container bg-light" style="border: 2px solid #ccc; padding: 20px; border-radius: 10px;">
            <div class="row">
                <div class="col-5">
                    <h4 class="page-title" style="color: coral">Tài Khoản</h4>
                </div>
                <div class="col-3"></div>
                <div class="col-4">
                    <button class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                            data-bs-target="#exampleModal1"><i
                            class="bi bi-plus-square"></i> Chọn Khách Hàng
                    </button>
                </div>
            </div>
            <hr style="border: 1px solid #000">
            <div>
                <label style="font-weight: bold;color: #721c24"><i class="bi bi-person-vcard-fill"></i> Tên Khách Hàng:</label>
                <span style="margin-left: 25px" th:if="${KhachHangDetail != null}"
                      th:text="${KhachHangDetail.hoten}">Khách Lẻ</span>
                <br>
                <label style="font-weight: bold;color: #de6a6a"><i class="bi bi-person-bounding-box"></i> Tên Tài Khoản:</label>
                <span style="margin-left: 25px" th:if="${KhachHangDetail != null}"
                      th:text="${KhachHangDetail.email}">Khách Lẻ</span>
                <br>
                <label style="font-weight: bold;color: #4949b8"><i class="bi bi-telephone"></i> Số Điện Thoại:</label>
                <span style="margin-left: 25px" th:if="${KhachHangDetail != null}"
                      th:text="${KhachHangDetail.sdt}"></span>
                <br>
                <label style="font-weight: bold;color: #919138"><i class="bi bi-envelope-paper-fill"></i> Email:</label>
                <span style="margin-left: 25px" th:if="${KhachHangDetail != null}"
                      th:text="${KhachHangDetail.email}"></span>
                <br>
            </div>

            <!--            Model chọn khách hàng-->
            <div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-xl">
                    <div class="modal-content" style="background-color: #d4d4d4">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Chọn Tài Khoản Khách Hàng</h5>
                        </div>
                        <div class="modal-body">
                            <table id="ListKhachHangTable"
                                   class="table table-hover">
                                <thead class="thead-light">
                                <tr>
                                    <th scope="col">Mã</th>
                                    <th scope="col">Họ Tên</th>
                                    <th scope="col">Ngày Sinh</th>
                                    <th scope="col">SDT</th>
                                    <th scope="col">Email</th>
                                    <th scope="col">Action</th>
                                </tr>
                                </thead>
                                <tbody style="max-height: 300px; overflow-y: auto;">
                                <!-- Dữ liệu của tbody -->
                                <tr th:if="${ListKhachHang.isEmpty()}">
                                    <td colspan="9">Danh Sách Khách Hàng Trống</td>
                                </tr>
                                <tr th:each="kh:${ListKhachHang}">
                                    <th>[[${kh.ma}]]</th>
                                    <th>[[${kh.hoten}]]</th>
                                    <th>[[${kh.ngaysinh}]]</th>
                                    <th>[[${kh.sdt}]]</th>
                                    <th>[[${kh.email}]]</th>
                                    <form th:action="@{/admin/ban-hang-tai-quay/tao-don-hang/add-khach-hang}"
                                          method="post">
                                        <th>
                                            <input type="hidden" class="form-control" th:name="maKH"
                                                   th:value="${kh.ma}">
                                            <input type="hidden" class="form-control" th:name="maHD"
                                                   th:value="${maHD}">
                                            <button type="submit" class="btn btn-link" style="text-decoration: none;">
                                                <i class="bi bi-plus-circle"></i>
                                                Chọn
                                            </button>
                                        </th>
                                    </form>
                                </tr>
                                </tbody>
                            </table>
                            <!--            end phần table-->
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--            End modal chọn khách hàng-->
        </div>
        <!--        End chọn khách hàng-->
        <div style="margin-top: 20px"></div>
        <!--        Chọn Địa chỉ và Voucher-->
        <div class="container bg-light" style="border: 2px solid #ccc; padding: 20px; border-radius: 10px;">
            <div class="row">
                <div class="col-5">
                    <h4 class="page-title" style="color: #8d8d39">Khách Hàng</h4>
                </div>
                <div class="col-3"></div>
                <div class="col-4">
                    <button class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                            data-bs-target="#exampleModal2"><i
                            class="bi bi-plus-square"></i> Chọn Địa Chỉ
                    </button>
                    <!-- Modal chọn địa chỉ -->
                    <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Chọn Địa Chỉ Khách Hàng</h5>
                                </div>
                                <div class="modal-body" style="background-color: #ddd">
                                    <form th:action="@{/admin/ban-hang-tai-quay/tao-don-hang/add-dia-chi}"
                                          method="post">
                                        <input type="hidden" class="form-control" th:name="maHD" th:value="${maHD}">
                                        <div>
                                            <div th:if="${KhachHangcheck == null}">
                                                Khách hàng này chưa có địa chỉ
                                            </div>
                                            <div th:if="${KhachHangcheck != null}" th:each="dc:${ListDiaChi}"
                                                 class="address-card">
                                                <div class="row">
                                                    <div class="col-2 d-flex justify-content-center align-items-center">
                                                        <i style="font-size: 3rem; color: cornflowerblue;"
                                                           class="bi bi-geo-alt-fill bi-3x"></i>
                                                    </div>
                                                    <div class="col-7">
                                                        <h6>
                                                            [[${dc.khachHang.hoten}]] |
                                                            <span style="color: darkgray;">[[${dc.khachHang.sdt}]]</span>
                                                        </h6>
                                                        <div>
                                                    <span style="color: black">
                                                        Địa chỉ:
                                                    </span>
                                                            [[${dc.tendiachi}]]
                                                        </div>
                                                        <div>
                                                            Xã : [[${dc.xa}]] , Huyện : [[${dc.huyen}]] , Thành Phố :
                                                            [[${dc.thanhpho}]]
                                                        </div>
                                                    </div>
                                                    <div class="col-3 d-flex justify-content-center align-items-center">
                                                        <input type="radio" class="form-control" th:name="maDC"
                                                               th:value="${dc.tendiachi}">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                                        <div class="row">
                                            <div class="col-12">
                                                <button type="submit" class="btn btn-success btn-block" id="submitBtn"
                                                        disabled>Xác Nhận
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End modal chọn địa chỉ -->
                </div>
            </div>
            <hr style="border: 1px solid #000">
            <div class="row" style="background-color: #d8eefc">
                <div class="col-6" >
                    <span id="diaChiSection" style="display: none;">
                        <br>
                        <label><h5 style="color: green">Thông tin Địa chỉ Khách Hàng</h5></label>
                        <br>
                        <form action="/admin/ban-hang-tai-quay/tao-don-hang/add-dia-chi1" method="post" id="address-form">
                              <input type="hidden" class="form-control" th:name="maHD" th:value="${maHD}">
                        <div class="row">
                            <div class="col-12">
                                <label>Tên Địa Chỉ:</label>
                                <input type="text" class="form-control" th:if="${diachiHoaDon == null}" name="dia_chi">
                                <input type="text" class="form-control" th:if="${diachiHoaDon != null}"
                                       th:value="${diachiHoaDon.tendiachi}">
                            </div>
                            <div class="col-6" style="margin-top: 10px">
                                <label>Thành Phố:</label>
                                     <select class="form-control"  name="province" id="province" th:if="${diachiHoaDon == null}" >
                                        <option th:if="${diachiHoaDon == null}" ></option>
                                    </select>

                                <input type="text" class="form-control" th:if="${diachiHoaDon != null}" name="province"
                                       th:value="${diachiHoaDon.thanhpho}" >
                            </div>
                            <br>
                            <div class="col-6" style="margin-top: 10px">
                                <label>Huyện:</label>
                                 <select class="form-control" name="district" id="district" th:if="${diachiHoaDon == null}" >
                                     <option th:if="${diachiHoaDon == null}" >Chọn Quận/Huyện</option>
                                  </select>

                                <input type="text" class="form-control" th:if="${diachiHoaDon != null}" name="district"
                                       th:value="${diachiHoaDon.huyen}" >

                            </div>
                            <br>
                            <div class="col-12" style="margin-top: 10px">
                                <label>Xã:</label>

                                <select class="form-control" name="ward" id="ward" th:if="${diachiHoaDon == null}" >
                                    <option th:if="${diachiHoaDon == null}">Chọn Xã/Phường</option>
                                 </select>

                                <input type="text" class="form-control" th:if="${diachiHoaDon != null}"
                                       th:value="${diachiHoaDon.xa}">
                            </div>
                        </div>
                        </form>
                        <div id="estimated-delivery-time" style="display: none;">
                            Dự kiến giao hàng trong 3-4 ngày.
                        </div>
                    </span>
                </div>
                <div class="col-1"></div>
                <div class="col-5 bỏ border-light"
                     style="align-content: space-around; display: flex; flex-direction: column; gap: 10px; border-left-radius:20px ;background-color: whitesmoke">
                    <br>
                    <label><h5 style="color: #060696">Thông tin Thanh toán</h5></label>
                    <div class="custom-control custom-switch">
                        <input type="checkbox" class="custom-control-input" id="customSwitches">
                        <label class="custom-control-label" for="customSwitches">Giao Hàng</label>
                    </div>
                    <div class="form-inline">
                        <input type="text" class="form-control" th:value="${detailMaGGHD}" placeholder="Mã Giảm Giá">
                        <button class="btn btn-primary waves-effect waves-light" data-bs-toggle="modal"
                                data-bs-target="#exampleModal3"><i
                                class="bi bi-plus-square"></i> Chọn Voucher
                        </button>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <h6 style="width: 200px">
                                <span style="color: #0303a9">Tiền Hàng: </span>[[${TongTienTruocGiam}]] VNĐ
                            </h6>
                            <br>
                            <h6 style="width: 200px">
                                <span style="color: green">Số Tiền Giảm: </span> [[${soTienGiam}]] VNĐ
                            </h6>
                            <br>
                            <h4>
                                <span style="color: darkred">Tổng số tiền:</span> [[${TongTienSauGiam}]] VNĐ
                            </h4>
                        </div>
                    </div>
                    <form style="width: 400px; text-align: right; margin-left: auto; margin-top: auto; margin-bottom: auto;">
                        <button type="submit" class="btn btn-success waves-effect waves-light">
                            Xác Nhận
                        </button>
                    </form>
                    <!--                    phần modal danh sách voucher-->
                    <div class="modal fade" id="exampleModal3" tabindex="-1" aria-labelledby="exampleModalLabel"
                         aria-hidden="true">
                        <div class="modal-dialog modal-xl">
                            <div class="modal-content" style="background-color: #d4d4d4">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Chọn Voucher cho khách hàng</h5>
                                </div>
                                <div class="modal-body">
                                    <table id="TableGGHD" class="table table-hover" style="margin: 20px 0;">
                                        <thead class="thead-light">
                                        <tr>
                                            <th scope="col">Mã</th>
                                            <th scope="col">Tên Chương Trình</th>
                                            <th scope="col">Điều kiện giảm</th>
                                            <th scope="col">Số Tiền Giảm</th>
                                            <th scope="col">Số Lượng</th>
                                            <th scope="col">Trạng Thái</th>
                                            <th scope="col">Action</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:if="${ListGiamGiaHoaDon.isEmpty()}">
                                            <td colspan="9">Không có dữ liệu</td>
                                        </tr>
                                        <tr th:each="item:${ListGiamGiaHoaDon}">
                                            <th scope="row">[[${item.ma}]]</th>
                                            <th>[[${item.ten}]]</th>
                                            <th>[[${item.dieu_kien}]]</th>
                                            <th>[[${item.so_tien_giam}]]</th>
                                            <th>[[${item.so_luong}]]</th>
                                            <th th:text="${item.trangthai == 1 ? 'Hoạt Động' : 'Ngừng Hoạt Động'}"></th>
                                            <th>
                                                <form th:action="@{/admin/ban-hang-tai-quay/tao-don-hang/add-voucher}"
                                                      method="post" class="d-inline">
                                                    <input type="hidden" class="form-control" th:name="maHD"
                                                           th:value="${maHD}">
                                                    <input type="hidden" class="form-control" th:name="maGGHD"
                                                           th:value="${item.ma}">
                                                    <button type="submit" class="btn btn-success"
                                                            style="text-decoration: none;"
                                                            th:disabled="${checkGGHD != 1 || detailMaGGHD == item.ma}">
                                                        <i class="bi bi-plus-circle"></i> Chọn
                                                    </button>
                                                </form>
                                                <form th:action="@{/admin/ban-hang-tai-quay/tao-don-hang/delete}"
                                                      method="get"
                                                      class="d-inline">
                                                    <input type="hidden" class="form-control" th:name="maHD"
                                                           th:value="${maHD}">
                                                    <input type="hidden" class="form-control" th:name="maGGHD"
                                                           th:value="${item.ma}">
                                                    <button type="submit" class="btn btn-danger"
                                                            style="text-decoration: none;"
                                                            th:disabled="${detailMaGGHD != item.ma}">
                                                        <i class="bi bi-dash-circle"></i> Hủy
                                                    </button>
                                                </form>
                                            </th>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--                    end phần modal danh sách voucher-->
                </div>
            </div>
        </div>
        <!--        End Chọn Địa chỉ và Voucher-->
    </div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!--<script src="/assets/js/jquery.min.js"></script>-->
<script src="/assets/js/popper.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.1/axios.min.js" integrity="sha512-bPh3uwgU5qEMipS/VOmRqynnMXGGSRv+72H/N260MQeXZIK4PG48401Bsby9Nq5P5fz7hy5UGNmC/W1Z51h2GQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    // 1. what is API
    // 2. How do I call API
    // 3. Explain code
    const host = "https://provinces.open-api.vn/api/";
    var callAPI = (api) => {
        return axios.get(api)
            .then((response) => {
                renderData(response.data, "province");
            });
    }
    callAPI('https://provinces.open-api.vn/api/?depth=1');
    var callApiDistrict = (api) => {
        return axios.get(api)
            .then((response) => {
                renderData(response.data.districts, "district");
            });
    }
    var callApiWard = (api) => {
        return axios.get(api)
            .then((response) => {
                renderData(response.data.wards, "ward");
            });
    }

    var renderData = (array, select) => {
        let row = ' <option disable value="">chọn</option>';

        array.forEach(element => {
            row += `<option value="${element.name}" data-code="${element.code}">${element.name}</option>`
        });
        document.querySelector("#" + select).innerHTML = row
    }

    $("#province").change(() => {
        const selectedCode = $("#province option:selected").data("code");
        callApiDistrict(host + "p/" + selectedCode + "?depth=2");
        printResult();
    });
    $("#district").change(() => {
        const selectedCode = $("#district option:selected").data("code");
        callApiWard(host + "d/" + selectedCode + "?depth=2");
        printResult();
    });
    $("#ward").change(() => {
        printResult();
    })

    var printResult = () => {
        if ($("#district").va() != "" && $("#province").val() != "" &&
            $("#ward").val() != "") {
            let result = $("#province option:selected").text() +
                " | " + $("#district option:selected").text() + " | " +
                $("#ward option:selected").text();
            $("#result").text(result)
        }

    }
</script>

<script>
    // Thêm sự kiện theo dõi sự thay đổi trên các trường thông tin địa chỉ
    document.getElementById('address-form').addEventListener('input', function () {
        // Tự động gửi dữ liệu khi có sự thay đổi
        // Sử dụng AJAX hoặc Fetch API để gửi dữ liệu đến máy chủ
        // Ví dụ sử dụng Fetch API:
        fetch('/admin/ban-hang-tai-quay/tao-don-hang/add-dia-chi1', {
            method: 'POST',
            body: new FormData(document.getElementById('address-form'))
        });
    });
</script>

<!--Sau khi nhập thông tin địa chỉ nó sẽ hiện thị số ngày sau-->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Lắng nghe sự kiện khi thông tin địa chỉ thay đổi
        const addressForm = document.getElementById("address-form");
        addressForm.addEventListener("change", function() {
            // Lấy thông tin địa chỉ từ các trường dữ liệu
            const diaChi = document.querySelector('input[name="dia_chi"]').value;
            const thanhPho = document.querySelector('select[name="province"]').value;
            const huyen = document.querySelector('select[name="district"]').value;
            const xa = document.querySelector('select[name="ward"]').value;

            // Thực hiện tính toán thời gian giao hàng dự kiến
            if (diaChi && thanhPho && huyen && xa) {
                const estimatedDeliveryTime = document.getElementById("estimated-delivery-time");
                estimatedDeliveryTime.style.display = "block";
            } else {
                const estimatedDeliveryTime = document.getElementById("estimated-delivery-time");
                estimatedDeliveryTime.style.display = "none";
            }
        });
    });
</script>

<script>
    // Add an event listener to all checkboxes
    document.addEventListener('change', function (event) {
        if (event.target.type === 'checkbox') {
            updateSelectedCount();
        }
    });

    function updateSelectedCount() {
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
        let selectedCount = 0;

        checkboxes.forEach(function (checkbox) {
            if (checkbox.checked) {
                selectedCount++;
            }
        });

        const selectedCountElement = document.getElementById('selectedCount');
        selectedCountElement.textContent = selectedCount;
    }
</script>
<!--script nút xác nhận địa chỉ-->
<script>
    var radioButtons = document.querySelectorAll('input[type="radio"]');
    var submitButton = document.getElementById('submitBtn');

    radioButtons.forEach(function (radioButton) {
        radioButton.addEventListener('change', function () {
            // Kiểm tra xem có radio nào được chọn hay không
            var isChecked = Array.from(radioButtons).some(function (radio) {
                return radio.checked;
            });

            // Enable hoặc disable nút "Xác Nhận" dựa trên kết quả kiểm tra
            submitButton.disabled = !isChecked;
        });
    });
</script>
<!--Nút giao hàng-->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        var customSwitch = document.getElementById("customSwitches");
        var diaChiSection = document.getElementById("diaChiSection");

        customSwitch.addEventListener("click", function () {
            if (customSwitch.checked) {
                diaChiSection.style.display = "block"; // Hiển thị địa chỉ nếu checkbox được gạt
            } else {
                diaChiSection.style.display = "none"; // Ẩn địa chỉ nếu checkbox không được gạt
            }
        });
    });
</script>



</body>
</html>